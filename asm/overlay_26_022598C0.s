#include "constants/trainers.h"
	.include "asm/macros.inc"
	.include "global.inc"

	.text

	thumb_func_start TryGetRematchTrainerIdByBaseTrainerId
TryGetRematchTrainerIdByBaseTrainerId: ; 0x022598C0
	push {r3, r4, r5, lr}
	add r5, r0, #0
	add r0, r1, #0
	bl GetRematchIdByBaseTrainerId
	add r4, r0, #0
	cmp r4, #0xff
	bne _022598D4
	mov r0, #0
	pop {r3, r4, r5, pc}
_022598D4:
	add r0, r5, #0
	add r1, r4, #0
	bl GetIndexOfFirstUnbeatenRematch
	add r2, r0, #0
	add r0, r5, #0
	add r1, r4, #0
	bl CheckUnlockedRematchGroup
	add r1, r0, #0
	add r0, r4, #0
	bl GetRematchTrainerIdByIndexPair
	pop {r3, r4, r5, pc}
	thumb_func_end TryGetRematchTrainerIdByBaseTrainerId

	thumb_func_start GetRematchIdByBaseTrainerId
GetRematchIdByBaseTrainerId: ; 0x022598F0
	ldr r3, _0225990C ; =_02259ACC
	mov r2, #0
_022598F4:
	ldrh r1, [r3]
	cmp r0, r1
	bne _02259900
	lsl r0, r2, #0x10
	lsr r0, r0, #0x10
	bx lr
_02259900:
	add r2, r2, #1
	add r3, #0xc
	cmp r2, #0x3f
	blo _022598F4
	mov r0, #0xff
	bx lr
	.balign 4, 0
_0225990C: .word _02259ACC
	thumb_func_end GetRematchIdByBaseTrainerId

	thumb_func_start GetIndexOfFirstUnbeatenRematch
GetIndexOfFirstUnbeatenRematch: ; 0x02259910
	push {r3, r4, r5, r6, r7, lr}
	add r6, r0, #0
	mov r0, #0xc
	ldr r2, _02259954 ; =_02259ACC
	mul r0, r1
	add r0, r2, r0
	ldr r7, _02259958 ; =0x0000FFFF
	mov r4, #1
	add r5, r0, #2
_02259922:
	ldrh r1, [r5]
	cmp r1, #0
	bne _02259930
	sub r0, r4, #1
	lsl r0, r0, #0x10
	lsr r0, r0, #0x10
	pop {r3, r4, r5, r6, r7, pc}
_02259930:
	cmp r1, r7
	beq _02259944
	add r0, r6, #0
	bl TrainerFlagCheck
	cmp r0, #0
	bne _02259944
	lsl r0, r4, #0x10
	lsr r0, r0, #0x10
	pop {r3, r4, r5, r6, r7, pc}
_02259944:
	add r4, r4, #1
	add r5, r5, #2
	cmp r4, #6
	blt _02259922
	sub r0, r4, #1
	lsl r0, r0, #0x10
	lsr r0, r0, #0x10
	pop {r3, r4, r5, r6, r7, pc}
	.balign 4, 0
_02259954: .word _02259ACC
_02259958: .word 0x0000FFFF
	thumb_func_end GetIndexOfFirstUnbeatenRematch

	thumb_func_start CheckUnlockedRematchGroup
CheckUnlockedRematchGroup: ; 0x0225995C
	push {r3, r4, r5, lr}
	add r5, r1, #0
	add r4, r2, #0
	bl SavArray_Flags_get
	cmp r4, #0
	bne _0225996E
	add r0, r4, #0
	pop {r3, r4, r5, pc}
_0225996E:
	add r1, r4, #0
	bl EventFlagCheck_RematchGroup
	cmp r0, #0
	bne _02259982
	add r0, r5, #0
	add r1, r4, #0
	bl GetPreviousRematchIndexForTrainer
	add r4, r0, #0
_02259982:
	add r0, r4, #0
	pop {r3, r4, r5, pc}
	.balign 4, 0
	thumb_func_end CheckUnlockedRematchGroup

	thumb_func_start GetPreviousRematchIndexForTrainer
GetPreviousRematchIndexForTrainer: ; 0x02259988
	sub r1, r1, #1
	lsl r1, r1, #0x10
	ldr r2, _022599B4 ; =_02259ACC
	lsr r3, r1, #0x10
	beq _022599AE
	mov r1, #0xc
	mul r1, r0
	add r2, r2, r1
	ldr r1, _022599B8 ; =0x0000FFFF
_0225999A:
	lsl r0, r3, #1
	ldrh r0, [r2, r0]
	cmp r0, r1
	beq _022599A6
	add r0, r3, #0
	bx lr
_022599A6:
	sub r0, r3, #1
	lsl r0, r0, #0x10
	lsr r3, r0, #0x10
	bne _0225999A
_022599AE:
	mov r0, #0
	bx lr
	nop
_022599B4: .word _02259ACC
_022599B8: .word 0x0000FFFF
	thumb_func_end GetPreviousRematchIndexForTrainer

	thumb_func_start GetRematchTrainerIdByIndexPair
GetRematchTrainerIdByIndexPair: ; 0x022599BC
	mov r2, #0xc
	mul r2, r0
	ldr r0, _022599CC ; =_02259ACC
	lsl r1, r1, #1
	add r0, r0, r2
	ldrh r0, [r1, r0]
	bx lr
	nop
_022599CC: .word _02259ACC
	thumb_func_end GetRematchTrainerIdByIndexPair

	.rodata

_02259ACC:
	.short TRAINER_BIRD_KEEPER_GS_JOSE_2, TRAINER_BIRD_KEEPER_GS_JOSE_2, TRAINER_BIRD_KEEPER_GS_JOSE, TRAINER_BIRD_KEEPER_GS_JOSE_3, TRAINER_BIRD_KEEPER_GS_JOSE_4, TRAINER_NONE
	.short TRAINER_PICNICKER_ERIN, TRAINER_PICNICKER_ERIN, TRAINER_PICNICKER_ERIN_2, TRAINER_PICNICKER_ERIN_3, TRAINER_PICNICKER_ERIN_4, TRAINER_NONE
	.short TRAINER_PICNICKER_LIZ, TRAINER_PICNICKER_LIZ, TRAINER_PICNICKER_LIZ_2, TRAINER_PICNICKER_LIZ_3, TRAINER_PICNICKER_LIZ_4, TRAINER_NONE
	.short TRAINER_SCHOOL_KID_M_CHAD, TRAINER_SCHOOL_KID_M_CHAD, TRAINER_SCHOOL_KID_M_CHAD_2, TRAINER_SCHOOL_KID_M_CHAD_3, TRAINER_SCHOOL_KID_M_CHAD_4, TRAINER_NONE
	.short TRAINER_SAILOR_HUEY, TRAINER_SAILOR_HUEY, TRAINER_SAILOR_HUEY_2, TRAINER_SAILOR_HUEY_3, TRAINER_SAILOR_HUEY_4, TRAINER_NONE
	.short TRAINER_BUG_CATCHER_WADE, TRAINER_BUG_CATCHER_WADE, TRAINER_BUG_CATCHER_WADE_3, TRAINER_BUG_CATCHER_WADE_2, TRAINER_BUG_CATCHER_WADE_4, TRAINER_NONE
	.short TRAINER_YOUNGSTER_JOEY, TRAINER_YOUNGSTER_JOEY, TRAINER_YOUNGSTER_JOEY_2, TRAINER_YOUNGSTER_JOEY_3, TRAINER_YOUNGSTER_JOEY_4, TRAINER_NONE
	.short TRAINER_SCHOOL_KID_M_JACK, TRAINER_SCHOOL_KID_M_JACK, TRAINER_SCHOOL_KID_M_JACK_2, TRAINER_SCHOOL_KID_M_JACK_3, TRAINER_SCHOOL_KID_M_JACK_4, TRAINER_NONE
	.short TRAINER_ACE_TRAINER_M_GAVEN, TRAINER_ACE_TRAINER_M_GAVEN, TRAINER_ACE_TRAINER_M_GAVEN_2, TRAINER_ACE_TRAINER_M_GAVEN_3, TRAINER_ACE_TRAINER_M_GAVEN_4, TRAINER_NONE
	.short TRAINER_BLACK_BELT_KENJI, TRAINER_BLACK_BELT_KENJI, TRAINER_BLACK_BELT_KENJI_2, TRAINER_BLACK_BELT_KENJI_3, TRAINER_BLACK_BELT_KENJI_4, TRAINER_NONE
	.short TRAINER_HIKER_PARRY, TRAINER_HIKER_PARRY, TRAINER_HIKER_PARRY_2, TRAINER_HIKER_PARRY_3, TRAINER_HIKER_PARRY_4, TRAINER_NONE
	.short TRAINER_PICNICKER_TIFFANY, TRAINER_PICNICKER_TIFFANY, TRAINER_PICNICKER_TIFFANY_2, TRAINER_PICNICKER_TIFFANY_3, TRAINER_PICNICKER_TIFFANY_4, TRAINER_NONE
	.short TRAINER_HIKER_ANTHONY, TRAINER_HIKER_ANTHONY, TRAINER_HIKER_ANTHONY_2, TRAINER_HIKER_ANTHONY_3, TRAINER_HIKER_ANTHONY_4, TRAINER_NONE
	.short TRAINER_ACE_TRAINER_F_REENA, TRAINER_ACE_TRAINER_F_REENA, TRAINER_ACE_TRAINER_F_REENA_2, TRAINER_ACE_TRAINER_F_REENA_3, TRAINER_ACE_TRAINER_F_REENA_4, TRAINER_NONE
	.short TRAINER_FISHERMAN_WILTON, TRAINER_FISHERMAN_WILTON, TRAINER_FISHERMAN_WILTON_2, TRAINER_FISHERMAN_WILTON_3, TRAINER_FISHERMAN_WILTON_4, TRAINER_NONE
	.short TRAINER_ACE_TRAINER_F_JAMIE, TRAINER_ACE_TRAINER_F_JAMIE, TRAINER_ACE_TRAINER_F_JAMIE_2, TRAINER_ACE_TRAINER_F_JAMIE_3, TRAINER_ACE_TRAINER_F_JAMIE_4, TRAINER_NONE
	.short TRAINER_JUGGLER_IRWIN, TRAINER_JUGGLER_IRWIN, TRAINER_JUGGLER_IRWIN_2, TRAINER_JUGGLER_IRWIN_3, TRAINER_JUGGLER_IRWIN_4, TRAINER_NONE
	.short TRAINER_POKE_MANIAC_BRENT, TRAINER_POKE_MANIAC_BRENT, TRAINER_POKE_MANIAC_BRENT_2, TRAINER_POKE_MANIAC_BRENT_3, TRAINER_POKE_MANIAC_BRENT_4, TRAINER_NONE
	.short TRAINER_SCHOOL_KID_M_ALAN, TRAINER_SCHOOL_KID_M_ALAN, TRAINER_SCHOOL_KID_M_ALAN_2, TRAINER_SCHOOL_KID_M_ALAN_3, TRAINER_SCHOOL_KID_M_ALAN_4, TRAINER_NONE
	.short TRAINER_POKEFAN_M_DEREK, TRAINER_POKEFAN_M_DEREK, TRAINER_POKEFAN_M_DEREK_2, TRAINER_POKEFAN_M_DEREK_3, TRAINER_POKEFAN_M_DEREK_4, TRAINER_NONE
	.short TRAINER_PICNICKER_GINA, TRAINER_PICNICKER_GINA, TRAINER_PICNICKER_GINA_2, TRAINER_PICNICKER_GINA_3, TRAINER_PICNICKER_GINA_4, TRAINER_NONE
	.short TRAINER_FISHERMAN_TULLY, TRAINER_FISHERMAN_TULLY, TRAINER_FISHERMAN_TULLY_2, TRAINER_FISHERMAN_TULLY_3, TRAINER_FISHERMAN_TULLY_4, TRAINER_NONE
	.short TRAINER_POKEFAN_BEVERLY, TRAINER_POKEFAN_BEVERLY, TRAINER_POKEFAN_BEVERLY_2, TRAINER_POKEFAN_BEVERLY_3, TRAINER_POKEFAN_BEVERLY_4, TRAINER_NONE
	.short TRAINER_BIRD_KEEPER_GS_VANCE, TRAINER_BIRD_KEEPER_GS_VANCE, TRAINER_BIRD_KEEPER_GS_VANCE_2, TRAINER_BIRD_KEEPER_GS_VANCE_3, TRAINER_BIRD_KEEPER_GS_VANCE_4, TRAINER_NONE
	.short TRAINER_FISHERMAN_RALPH, TRAINER_FISHERMAN_RALPH, TRAINER_FISHERMAN_RALPH_2, TRAINER_FISHERMAN_RALPH_3, TRAINER_FISHERMAN_RALPH_4, TRAINER_NONE
	.short TRAINER_CAMPER_TODD, TRAINER_CAMPER_TODD, TRAINER_CAMPER_TODD_2, TRAINER_CAMPER_TODD_3, TRAINER_CAMPER_TODD_4, TRAINER_NONE
	.short TRAINER_BUG_CATCHER_ARNIE, TRAINER_BUG_CATCHER_ARNIE, TRAINER_BUG_CATCHER_ARNIE_2, TRAINER_BUG_CATCHER_ARNIE_3, TRAINER_BUG_CATCHER_ARNIE_4, TRAINER_NONE
	.short TRAINER_LASS_DANA, TRAINER_LASS_DANA, TRAINER_LASS_DANA_2, TRAINER_LASS_DANA_3, TRAINER_LASS_DANA_4, TRAINER_NONE
	.short TRAINER_LASS_KRISE, TRAINER_LASS_KRISE, TRAINER_LASS_KRISE_2, TRAINER_LASS_KRISE_3, TRAINER_LASS_KRISE_4, TRAINER_NONE
	.short TRAINER_YOUNGSTER_IAN, TRAINER_YOUNGSTER_IAN, TRAINER_YOUNGSTER_IAN_2, TRAINER_YOUNGSTER_IAN_3, TRAINER_YOUNGSTER_IAN_4, TRAINER_NONE
	.short TRAINER_FIREBREATHER_WALT, TRAINER_FIREBREATHER_WALT, TRAINER_FIREBREATHER_WALT_2, TRAINER_FIREBREATHER_WALT_3, TRAINER_FIREBREATHER_WALT_4, TRAINER_NONE
	.short TRAINER_BUG_CATCHER_DOUG, TRAINER_BUG_CATCHER_DOUG, TRAINER_BUG_CATCHER_DOUG_2, TRAINER_BUG_CATCHER_DOUG_3, TRAINER_BUG_CATCHER_DOUG_4, TRAINER_NONE
	.short TRAINER_BUG_CATCHER_ROB, TRAINER_BUG_CATCHER_ROB, TRAINER_BUG_CATCHER_ROB_2, TRAINER_BUG_CATCHER_ROB_3, TRAINER_BUG_CATCHER_ROB_4, TRAINER_NONE
	.short TRAINER_BIKER_REESE, TRAINER_BIKER_REESE, TRAINER_BIKER_REESE_2, TRAINER_BIKER_REESE_3, TRAINER_BIKER_REESE_4, TRAINER_NONE
	.short TRAINER_BIKER_AIDEN, TRAINER_BIKER_AIDEN, TRAINER_BIKER_AIDEN_2, TRAINER_BIKER_AIDEN_3, TRAINER_BIKER_AIDEN_4, TRAINER_NONE
	.short TRAINER_BIKER_ERNEST, TRAINER_BIKER_ERNEST, TRAINER_BIKER_ERNEST_2, TRAINER_BIKER_ERNEST_3, TRAINER_BIKER_ERNEST_4, TRAINER_NONE
	.short TRAINER_TEACHER_HILLARY, TRAINER_TEACHER_HILLARY, TRAINER_TEACHER_HILLARY_2, TRAINER_TEACHER_HILLARY_3, TRAINER_TEACHER_HILLARY_4, TRAINER_NONE
	.short TRAINER_SCHOOL_KID_M_BILLY, TRAINER_SCHOOL_KID_M_BILLY, TRAINER_SCHOOL_KID_M_BILLY_2, TRAINER_SCHOOL_KID_M_BILLY_3, TRAINER_SCHOOL_KID_M_BILLY_4, TRAINER_NONE
	.short TRAINER_TWINS_KAY_AND_TIA, TRAINER_TWINS_KAY_AND_TIA, TRAINER_TWINS_KAY_AND_TIA_2, TRAINER_TWINS_KAY_AND_TIA_3, TRAINER_TWINS_KAY_AND_TIA_4, TRAINER_NONE
	.short TRAINER_BIRD_KEEPER_GS_JOSH, TRAINER_BIRD_KEEPER_GS_JOSH, TRAINER_BIRD_KEEPER_GS_JOSH_2, TRAINER_BIRD_KEEPER_GS_JOSH_3, TRAINER_BIRD_KEEPER_GS_JOSH_4, TRAINER_NONE
	.short TRAINER_SCHOOL_KID_M_TORIN, TRAINER_SCHOOL_KID_M_TORIN, TRAINER_SCHOOL_KID_M_TORIN_2, TRAINER_SCHOOL_KID_M_TORIN_3, TRAINER_SCHOOL_KID_M_TORIN_4, TRAINER_NONE
	.short TRAINER_YOUNG_COUPLE_TIM_AND_SUE, TRAINER_YOUNG_COUPLE_TIM_AND_SUE, TRAINER_YOUNG_COUPLE_TIM_AND_SUE_2, TRAINER_YOUNG_COUPLE_TIM_AND_SUE_3, TRAINER_YOUNG_COUPLE_TIM_AND_SUE_4, TRAINER_NONE
	.short TRAINER_HIKER_KENNY, TRAINER_HIKER_KENNY, TRAINER_HIKER_KENNY_2, TRAINER_HIKER_KENNY_3, TRAINER_HIKER_KENNY_4, TRAINER_NONE
	.short TRAINER_CAMPER_TANNER, TRAINER_CAMPER_TANNER, TRAINER_CAMPER_TANNER_2, TRAINER_CAMPER_TANNER_3, TRAINER_CAMPER_TANNER_4, TRAINER_NONE
	.short TRAINER_FISHERMAN_KYLE, TRAINER_FISHERMAN_KYLE, TRAINER_FISHERMAN_KYLE_2, TRAINER_FISHERMAN_KYLE_3, TRAINER_FISHERMAN_KYLE_4, TRAINER_NONE
	.short TRAINER_FISHERMAN_KYLER, TRAINER_FISHERMAN_KYLER, TRAINER_FISHERMAN_KYLER_2, TRAINER_FISHERMAN_KYLER_3, TRAINER_FISHERMAN_KYLER_4, TRAINER_NONE
	.short TRAINER_GENTLEMAN_ALFRED, TRAINER_GENTLEMAN_ALFRED, TRAINER_GENTLEMAN_ALFRED_2, TRAINER_GENTLEMAN_ALFRED_3, TRAINER_GENTLEMAN_ALFRED_4, TRAINER_NONE
	.short TRAINER_LEADER_FALKNER_FALKNER, TRAINER_LEADER_FALKNER_FALKNER, TRAINER_LEADER_FALKNER_FALKNER_2, TRAINER_NONE, TRAINER_NONE, TRAINER_NONE
	.short TRAINER_LEADER_BUGSY_BUGSY, TRAINER_LEADER_BUGSY_BUGSY, TRAINER_LEADER_BUGSY_BUGSY_2, TRAINER_NONE, TRAINER_NONE, TRAINER_NONE
	.short TRAINER_LEADER_WHITNEY, TRAINER_LEADER_WHITNEY, TRAINER_LEADER_WHITNEY_2, TRAINER_NONE, TRAINER_NONE, TRAINER_NONE
	.short TRAINER_LEADER_MORTY_MORTY, TRAINER_LEADER_MORTY_MORTY, TRAINER_LEADER_MORTY_MORTY_2, TRAINER_NONE, TRAINER_NONE, TRAINER_NONE
	.short TRAINER_LEADER_JASMINE_JASMINE, TRAINER_LEADER_JASMINE_JASMINE, TRAINER_LEADER_JASMINE_JASMINE_2, TRAINER_NONE, TRAINER_NONE, TRAINER_NONE
	.short TRAINER_LEADER_CHUCK_CHUCK, TRAINER_LEADER_CHUCK_CHUCK, TRAINER_LEADER_CHUCK_CHUCK_2, TRAINER_NONE, TRAINER_NONE, TRAINER_NONE
	.short TRAINER_LEADER_PRYCE_PRYCE, TRAINER_LEADER_PRYCE_PRYCE, TRAINER_LEADER_PRYCE_PRYCE_2, TRAINER_NONE, TRAINER_NONE, TRAINER_NONE
	.short TRAINER_LEADER_CLAIR_CLAIR, TRAINER_LEADER_CLAIR_CLAIR, TRAINER_LEADER_CLAIR_CLAIR_2, TRAINER_NONE, TRAINER_NONE, TRAINER_NONE
	.short TRAINER_LEADER_BROCK_BROCK, TRAINER_LEADER_BROCK_BROCK, TRAINER_LEADER_BROCK_BROCK_2, TRAINER_NONE, TRAINER_NONE, TRAINER_NONE
	.short TRAINER_LEADER_MISTY_MISTY, TRAINER_LEADER_MISTY_MISTY, TRAINER_LEADER_MISTY_MISTY_2, TRAINER_NONE, TRAINER_NONE, TRAINER_NONE
	.short TRAINER_LEADER_LT_SURGE_LT__SURGE, TRAINER_LEADER_LT_SURGE_LT__SURGE, TRAINER_LEADER_LT_SURGE_LT__SURGE_2, TRAINER_NONE, TRAINER_NONE, TRAINER_NONE
	.short TRAINER_LEADER_ERIKA_ERIKA, TRAINER_LEADER_ERIKA_ERIKA, TRAINER_LEADER_ERIKA_ERIKA_2, TRAINER_NONE, TRAINER_NONE, TRAINER_NONE
	.short TRAINER_LEADER_JANINE_JANINE, TRAINER_LEADER_JANINE_JANINE, TRAINER_LEADER_JANINE_JANINE_2, TRAINER_NONE, TRAINER_NONE, TRAINER_NONE
	.short TRAINER_LEADER_SABRINA_SABRINA, TRAINER_LEADER_SABRINA_SABRINA, TRAINER_LEADER_SABRINA_SABRINA_2, TRAINER_NONE, TRAINER_NONE, TRAINER_NONE
	.short TRAINER_LEADER_BLAINE_BLAINE, TRAINER_LEADER_BLAINE_BLAINE, TRAINER_LEADER_BLAINE_BLAINE_2, TRAINER_NONE, TRAINER_NONE, TRAINER_NONE
	.short TRAINER_LEADER_BLUE_BLUE, TRAINER_LEADER_BLUE_BLUE, TRAINER_LEADER_BLUE_BLUE_2, TRAINER_NONE, TRAINER_NONE, TRAINER_NONE
